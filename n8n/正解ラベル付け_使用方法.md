# Gmail分類正解ラベル付け - 使用方法

## 📋 概要
`retraining_candidates_enhanced.xlsx`ファイルを使用して、Gmail分類の正解ラベルを効率的に付与するためのガイドです。

## 🚀 使用手順

### 1. ファイルを開く
- `n8n/retraining_candidates_enhanced.xlsx` をExcelで開く
- 「Gmail分類正解ラベル付け」シートを確認

### 2. 正解ラベルを付与
- **groundTruth列**（オレンジ色のヘッダー）をクリック
- ドロップダウンから正しいラベルを選択：
  - `支払い関係`
  - `重要`
  - `プロモーション` 
  - `仕事・学習`

### 3. 修正理由を記録（任意）
- **correctionReason列**に修正理由を入力
- 例：「デビットカード通知のため支払い関係が正解」

### 4. 修正情報を記録（任意）
- **correctedAt**: 修正日時（例：2025-07-24）
- **correctedBy**: 修正者名（例：ユーザー名）

## 📊 各列の説明

| 列名 | 説明 |
|------|------|
| timestamp | メール処理日時 |
| messageId | メール識別ID |
| subject | メール件名 |
| predictedClass | AIの予測ラベル |
| confidence | 予測信頼度 |
| reason | AI判定理由 |
| **groundTruth** | **正解ラベル（要入力）** |
| correctionReason | 修正理由（任意） |
| correctedAt | 修正日時（任意） |
| correctedBy | 修正者（任意） |

## 🎯 ラベル付けのガイドライン

### 支払い関係
- PayPay、デビットカード、クレジットカード利用通知
- 料金請求、引き落とし通知
- 銀行振込、口座振替関連

### 重要
- システム障害、メンテナンス通知
- セキュリティアラート
- 契約更新、期限切れ通知
- 法定点検、重要手続き

### プロモーション
- セール、キャンペーン情報
- 割引、特価情報
- マーケティングメール
- 商品・サービス宣伝

### 仕事・学習
- 求人情報、転職関連
- 技術情報、プログラミング
- 学習コンテンツ
- 業務関連通知

## 💡 効率化のコツ

1. **一括処理**: 似たようなメールは連続して処理
2. **パターン認識**: 件名のパターンから素早く判定
3. **理由記録**: 判断に迷った場合は理由を記録
4. **定期保存**: 作業中は定期的に保存

## 🔄 データ活用フロー

1. Excel で正解ラベル付与
2. CSVとして保存・エクスポート
3. `analyze_groundtruth_data.py` で機械学習
4. 新モデルをFlask APIに統合
5. 分類精度の向上を確認

## ⚠️ 注意事項

- **groundTruth列**は必須入力項目
- ドロップダウン以外の値は入力しない
- ファイルの破損を防ぐため定期的にバックアップ
- 大量データ処理時はExcelの動作が重くなる場合あり

## 📞 サポート

分類判断に迷った場合：
1. 既存の正解データを参考にする
2. メール内容の文脈を重視する
3. 不明な場合は「重要」として保守的に分類

---
*作成日: 2025-07-24*
*ファイル場所: `/Users/hasegawayuya/Projects/dev-projects/gmail-classifier/n8n/`*
